<mat-card class="chat-container">
  <mat-card-header>
    <mat-card-title>Physics Agent</mat-card-title>
    <span class="spacer"></span>
    <button mat-icon-button (click)="agentService.clearChat()">
      <mat-icon>delete_sweep</mat-icon>
    </button>
  </mat-card-header>

  <mat-card-content #scrollContainer class="message-area">
    <div *ngFor="let msg of agentService.messages()">
      <div [ngClass]="msg.role + '-bubble'">
        {{ msg.text }}
      </div>

      <app-gravity-form 
        *ngIf="msg.isInterrupt && msg.toolName === 'calculate_gravity'"
        [initialData]="msg.initialArgs"
        (confirmed)="handleFormSubmit($event)">
      </app-gravity-form>
    </div>
  </mat-card-content>

  <mat-card-actions class="input-area">
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Ask a physics question...</mat-label>
      <input matInput [(ngModel)]="userInput" (keyup.enter)="onSend()">
      
      <button mat-icon-button matSuffix (click)="onSend()">
        <mat-icon>send</mat-icon>
      </button>
    </mat-form-field>
  </mat-card-actions>
  
</mat-card>